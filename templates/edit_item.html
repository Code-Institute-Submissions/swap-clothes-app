{% extends "base.html" %}

<!-- Main content -->
{% block content %}
<h1 class="gradient-bkg-light">Edit Item</h1>

<div class="row form-container">
    <!-- Edit Item Form -->
    <form
        class="col s12 form-element"
        method="POST"
        action="{{ url_for('edit_item', item_id = item._id) }}">
        <div class="card-panel z-depth-4 border-radius-sm">

            <!-- Item Name -->
            <div class="row input-container">
                <div class="input-field col s12">
                    <input
                        id="item_name"
                        name="item_name"
                        type="text"
                        minlength="3"
                        maxlength="20"
                        value="{{ item.item_name }}"
                        required/>
                    <label for="item_name">
                        Item Name 
                        <i 
                            class="far fa-question-circle tooltipped" 
                            data-position="right" 
                            data-tooltip="Between 3-20 characters long"></i>
                    </label>
                </div>
            </div>

            <!-- Item Image -->
            <div class="row input-container">
                <div class="input-field col s12">
                    <input
                        id="item_image"
                        name="item_image"
                        type="text"
                        value="{{ item.item_image }}"/>
                    <label for="item_image">
                        Picture Link 
                    </label>
                </div>
            </div>

            <!-- Short Description for the item card front -->
            <div class="row input-container">
                <div class="input-field col s12">
                    <textarea
                        id="short_desc"
                        name="short_desc"
                        maxlength="100"
                        class="materialize-textarea"
                        required>{{ item.short_description }}</textarea>
                    <label for="short_desc">
                    Short Description
                        <i 
                            class="far fa-question-circle tooltipped" 
                            data-position="right" 
                            data-tooltip="Between 3-100 characters long"></i>
                    </label>
                </div>
            </div>

            <!-- Long Description for the item card back -->
            <div class="row input-container">
                <div class="input-field col s12">
                    <textarea
                        id="long_desc"
                        name="long_desc"
                        maxlength="300"
                        class="materialize-textarea"
                        required>{{ item.long_description }}</textarea>
                    <label for="long_desc">
                    Long Description
                        <i 
                            class="far fa-question-circle tooltipped" 
                            data-position="right" 
                            data-tooltip="Less than 300 characters"></i>
                    </label>
                </div>
            </div>

            <!-- Category selector -->
            <div class="row input-container">
                <div class="input-field col s12">
                    <select name="category">
                        <option value="" disabled>Category</option>
                        {% for category in categories %}
                            {% if category.category_name == item.category %}
                                <option value="{{ category.category_name }}" selected>{{ category.category_name }}</option>
                            {% else %}
                                <option value="{{ category.category_name }}">{{ category.category_name }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                    <label for="">Category</label>
                </div>
            </div>

            <!-- Item Sizing -->
            <div class="row input-container">
                <div class="input-field col s6">
                    <input
                        id="size"
                        name="size"
                        type="text"
                        maxlength="5"
                        class="materialize-textarea"
                        value="{{ item.size }}"
                        required></input>
                    <label for="size">Size</label>
                </div>
                <div class="input-field col s6">
                    <select name="size_region">
                        <option value="" disabled>From</option>
                            <option value="EU" {% if item.size_country == "EU" %} selected {% endif %}>EU</option>
                            <option value="UK" {% if item.size_country == "UK" %} selected {% endif %}>UK</option>
                            <option value="USA" {% if item.size_country == "USA" %} selected {% endif %}>USA</option>
                    </select>
                </div>
            </div>

            <!-- Item Fit -->
            <div class="row input-container">
                <div class="input-field col s12">
                    <select name="item_fit">
                        <option value="" disabled>Fit</option>
                            <option value="Women" {% if item.size_gender == "Women" %} selected {% endif %}>Women</option>
                            <option value="Men" {% if item.size_gender == "Men" %} selected {% endif %}>Men</option>
                            <option value="Unisex" {% if item.size_gender == "Unisex" %} selected {% endif %}>Unisex</option>
                    </select>
                    <label for="">Fit</label>
                </div>
            </div>

            <!-- Used Status -->
            <div class="row input-container">
                <div class="input-field col s12">
                    <select name="used_status">
                        <option value="" disabled>Used</option>
                            <option value="Never" {% if item.used_status == "Never" %} selected {% endif %}>Never</option>
                            <option value="Barely" {% if item.used_status == "Barely" %} selected {% endif %}>Barely</option>
                            <option value="Few Times" {% if item.used_status == "Few Times" %} selected {% endif %}>Few Times</option>
                            <option value="Often" {% if item.used_status == "Often" %} selected {% endif %}>Often</option>
                            <option value="Heavily" {% if item.used_status == "Heavily" %} selected {% endif %}>Heavily</option>
                    </select>
                    <label for="">Used</label>
                </div>
            </div>

            <!-- Submit button -->
            <div class="row centered-row">
                <a href="{{ url_for('items', username=session.user) }}" class="col s5 m4 l3 swap-btn outlined-orange border-radius-m centered-elem center-align">
                    Cancel
                </a>
                <button
                    class="col s5 m4 l3 swap-btn filled-red gradient-bkg border-radius-m centered-elem"
                    type="submit"
                    name="action">
                    Edit Item
                </button>
            </div>

        </div>
    </form>
</div>
{% endblock %}